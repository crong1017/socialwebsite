<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨»å†Šèˆ‡ç™»å…¥ - æ³¡æ³¡ç³–ç¤¾äº¤</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="auth-container">
    <h1>æ³¡æ³¡ç³–ç¤¾äº¤</h1>
    <div id="formSwitcher">
        <button onclick="showForm('register')">è¨»å†Š</button>
        <button onclick="showForm('login')">ç™»å…¥</button>
    </div>
    <!-- è¨»å†Šè¡¨å–® -->
    <form id="registerForm" style="display: none;">
        <h2>è¨»å†Š</h2>
        <label for="username">ä½¿ç”¨è€…åç¨±</label>
        <input type="text" id="username" name="username" required>
        <label for="email">é›»å­éƒµä»¶</label>
        <input type="email" id="registerEmail" name="email" required>
        <label for="password">å¯†ç¢¼</label>
        <input type="password" id="registerPassword" name="password" required>
        <button type="submit">è¨»å†Š</button>
    </form>
    <!-- ç™»å…¥è¡¨å–® -->
    <form id="loginForm" style="display: none;">
        <h2>ç™»å…¥</h2>
        <label for="username">ä½¿ç”¨è€…åç¨±</label>
        <input type="text" id="loginUsername" name="username" required>
        <label for="password">å¯†ç¢¼</label>
        <input type="password" id="loginPassword" name="password" required>
        <button type="submit">ç™»å…¥</button>
    </form>
</div>
<script>
    // åˆ‡æ›é¡¯ç¤ºè¡¨å–®
    function showForm(form) {
        document.getElementById('registerForm').style.display = form === 'register' ? 'block' : 'none';
        document.getElementById('loginForm').style.display = form === 'login' ? 'block' : 'none';
    }
    // è™•ç†è¨»å†Šè«‹æ±‚
    document.getElementById('registerForm').addEventListener('submit', async function(event) {
        event.preventDefault();
        const username = document.getElementById('username').value;
        const email = document.getElementById('registerEmail').value;
        const password = document.getElementById('registerPassword').value;
        const response = await fetch('/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username, email, password })
        });
        const result = await response.json();
        if (result.success) {
            alert('è¨»å†ŠæˆåŠŸï¼è«‹ç™»å…¥ã€‚');
            showForm('login'); // é¡¯ç¤ºç™»å…¥è¡¨å–®
        } else {
            alert(result.message || 'è¨»å†Šå¤±æ•—ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚');
        }
    });
    // è™•ç†ç™»å…¥è«‹æ±‚
    document.getElementById('loginForm').addEventListener('submit', async function(event) {
        event.preventDefault();
        const username = document.getElementById('loginUsername').value;
        const password = document.getElementById('loginPassword').value;
        const response = await fetch('/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username, password })
        });
        const result = await response.json();
        if (result.success) {
            alert('ç™»å…¥æˆåŠŸï¼');
            window.location.href = 'index.html'; // è·³è½‰åˆ°ç™¼æ–‡é é¢
        } else if (result.message === 'User not found') {
            alert('æ‚¨å°šæœªè¨»å†Šï¼Œè«‹å…ˆè¨»å†Šï¼');
            showForm('register'); // é¡¯ç¤ºè¨»å†Šè¡¨å–®
        } else {
            alert(result.message || 'ç™»å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥å¸³è™Ÿæˆ–å¯†ç¢¼ã€‚');
        }
    });
</script>
</body>
</html>
register.html
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>è¨»å†Š - æ³¡æ³¡ç³–ç¤¾äº¤</title>
    <script src="script.js"></script>
</head>
<body>
    <h1>è¨»å†Š</h1>
    <input id="username" type="text" placeholder="ä½¿ç”¨è€…åç¨±">
    <input id="email" type="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button onclick="register()">è¨»å†Š</button>
</body>
</html>
index.html
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¡æ³¡ç³–ç¤¾äº¤</title>
    <link rel="stylesheet" href="Client/css/styles.css">
    <script type="module" src="Client/js/main.js"></script>
</head>
<body>
    <header class="header">
@@ -165,25 +39,35 @@ <h2>å‰µå»ºæ–°è²¼æ–‡</h2>
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            // ä½¿ç”¨æ¨¡çµ„ä¸­çš„auth.jsä¾†æ¨¡æ“¬ç™»å…¥
            const response = await auth.login(email, password);
            if (response.success) {
            const response = await fetch('/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
            });
            const result = await response.json();
            if (result.success) {
                alert('ç™»å…¥æˆåŠŸï¼');
                document.getElementById('auth-section').style.display = 'none';
                document.getElementById('post-section').style.display = 'block';
                loadPosts(); // è¼‰å…¥è²¼æ–‡
            } else {
                alert(response.message || 'ç™»å…¥å¤±æ•—');
                alert(result.message || 'ç™»å…¥å¤±æ•—');
            }
        }

        // è²¼æ–‡åŠŸèƒ½
        // ç™¼è¡¨è²¼æ–‡åŠŸèƒ½
        async function createPost() {
            const content = document.getElementById('post-content').value;
            if (content) {
                // å‘¼å« API æ–°å¢è²¼æ–‡
                const response = await api.addLearningGoal(content);
                if (response.success) {
                const response = await fetch('/createPost', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content })
                });
                const result = await response.json();
                if (result.success) {
                    alert('ç™¼æ–‡æˆåŠŸï¼');
                    document.getElementById('post-content').value = '';
                    loadPosts(); // é‡æ–°è¼‰å…¥è²¼æ–‡
@@ -199,26 +83,27 @@ <h2>å‰µå»ºæ–°è²¼æ–‡</h2>
        async function loadPosts() {
            const feedContainer = document.getElementById('feedContainer');
            feedContainer.innerHTML = ''; // æ¸…ç©ºç¾æœ‰è²¼æ–‡
            const posts = await api.getDailyLearningList(); // å‡è¨­é€™å€‹æ–¹æ³•æ¨¡æ“¬è¼‰å…¥è²¼æ–‡
            posts.forEach((post) => {
            const posts = await fetch('/posts'); // å‡è¨­é€™å€‹æ–¹æ³•æ¨¡æ“¬è¼‰å…¥è²¼æ–‡
            const postsData = await posts.json();
            postsData.forEach(post => {
                const postCard = document.createElement('div');
                postCard.className = 'post-card';
                postCard.innerHTML = 
                postCard.innerHTML = `
                    <div class="post-content">
                        <p>${post.name}</p>
                        <span class="post-time">é€²åº¦ï¼š${post.progress}%</span>
                        <p>${post.content}</p>
                        <span class="post-time">${post.time}</span>
                    </div>
                    <div class="interaction-buttons">
                        <button onclick="likePost(${post.id})">ğŸ‘ æŒ‰è®š</button>
                    </div>
                ;
                `;
                feedContainer.appendChild(postCard);
            });
        }

        // æ¨¡æ“¬æŒ‰è®šåŠŸèƒ½
        function likePost(postId) {
            alert(æ‚¨å°è²¼æ–‡ ${postId} æŒ‰è®šï¼);
            alert(`æ‚¨å°è²¼æ–‡ ${postId} æŒ‰è®šï¼`);
        }
    </script>
</body>
